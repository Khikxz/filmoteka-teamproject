!function(){var e,t,n,a,o="api_key=b5e824a3d922f68ba211fcf6dbdcb6f5",i="https://api.themoviedb.org/3/discover/movie?sort_by-popularity.desc&"+o,l="https://image.tmdb.org/t/p/w500";n=null===JSON.parse(localStorage.getItem("movie-queue"))?[]:JSON.parse(localStorage.getItem("movie-queue")),localStorage.setItem("movie-queue",JSON.stringify(n)),a=null===JSON.parse(localStorage.getItem("movie-watched"))?[]:JSON.parse(localStorage.getItem("movie-watched")),localStorage.setItem("movie-watched",JSON.stringify(a));var s=document.getElementById("myModal"),d=document.getElementById("modal-poster"),c=document.getElementById("modal-title"),r=document.getElementById("modal-vote"),g=document.getElementById("modal-popularity"),u=document.getElementById("modal-original-title"),m=document.getElementById("modal-genre"),v=document.getElementById("modal-overview"),p=document.getElementById("addToWatchedBtn"),h=document.getElementById("addToQueuBtn");function y(){s.style.display="none"}document.getElementsByClassName("close")[0].addEventListener("click",y),window.addEventListener("click",(function(e){e.target===s&&y()}));var f=document.getElementById("main"),E=document.getElementById("search-form"),b=document.getElementById("search-input"),L=(document.getElementById("gallery"),document.querySelector(".loader-container"));function x(n){lastUrl=n,f.classList.toggle("is-hidden"),L.classList.toggle("is-hidden"),fetch(n).then((function(e){return e.json()})).then((function(n){console.log(n.results),0!==n.results.length?(!function(n){f.innerHTML="",n.forEach((function(n){var a=n.title,o=n.poster_path,i=n.release_date,p=n.genre_ids,h=document.createElement("div");h.classList.add("movie"),h.innerHTML='\n            <img src="'.concat(o?l+o:"http:/>/via.placeholder.com/1080x1500",'"\n                alt="').concat(a,'"/>\n            \n            <div class="movie-info">\n                <h3>').concat(a.toUpperCase(),'</h3>\n                <div class="movie-details">\n                    <span id="genre" class="').concat(p,'">').concat(p,'</span> |\n                    <span id="release_date" class="').concat(i,'">').concat(i.slice(0,4),"</span>\n                </div>\n            </div>        \n        "),h.addEventListener("click",(function(){!function(n){d.src="https://image.tmdb.org/t/p/w500/".concat(n.poster_path),c.textContent=n.title.toUpperCase(),r.textContent=n.vote_average.toFixed(1)+"   /   "+n.vote_count,g.textContent=n.popularity.toFixed(1),u.textContent=n.original_title.toUpperCase(),m.textContent=n.genre,v.textContent=n.overview,s.style.display="block",d.src="https://image.tmdb.org/t/p/w500/".concat(n.poster_path),c.textContent=n.title,r.textContent=n.vote_average+"/"+n.vote_count,g.textContent=n.popularity,u.textContent=n.original_title,m.textContent=n.genre_ids,v.textContent=n.overview,s.style.display="block",t=n.id,e=n.original_title}(n)})),f.appendChild(h)}))}(n.results),currentPage=n.page,nextPage=currentPage+1,prevPage=currentPage-1,totalPages=n.total_pages,f.classList.toggle("is-hidden"),L.classList.toggle("is-hidden"),current.innerText=currentPage,currentPage<=1?(prev.classList.add("disabled"),next.classList.remove("disabled")):currentPage>=totalPages?(prev.classList.remove("disabled"),next.classList.add("disabled")):(prev.classList.remove("disabled"),next.classList.remove("disabled"))):(f.classList.toggle("is-hidden"),L.classList.toggle("is-hidden"),f.innerHTML='<h1 class="no-results">No Results Found</h1>')}))}function I(e){var t=lastUrl.split("?"),n=t[1].split("&"),a=n[n.length-1].split("=");if("page"!=a[0]){x(lastUrl+"&page="+e)}else{a[1]=e.toString();var o=a.join("=");n[n.length-1]=o;var i=n.join("&");x(t[0]+"?"+i)}}x(i),E.addEventListener("submit",(function(e){e.preventDefault();var t=b.value;x(t?"https://api.themoviedb.org/3/search/movie?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5&query="+t:i)})),prev.addEventListener("click",(function(){prevPage>0&&I(prevPage)})),next.addEventListener("click",(function(){nextPage<=totalPages&&I(nextPage)})),f.addEventListener("click",(function(t){var n=t.target.parentElement;e=n.lastElementChild.firstElementChild.innerText,console.log(e)})),p.addEventListener("click",(function(){a.includes(e)?alert("".concat(e," has been watched already")):a.push(e),localStorage.setItem("movie-watched",JSON.stringify(a))})),h.addEventListener("click",(function(){n.includes(e)?alert("".concat(e," has been added to the queue already")):n.push(e),localStorage.setItem("movie-queue",JSON.stringify(n))})),p.addEventListener("click",(function(){a.includes(t)?alert("".concat(e," has been watched already")):a.push(t),localStorage.setItem("movie-watched",JSON.stringify(a))})),h.addEventListener("click",(function(){n.includes(t)?alert("".concat(e," has been added to the queue already")):n.push(t),localStorage.setItem("movie-queue",JSON.stringify(n))})),document.body.addEventListener("keydown",(function(e){"Escape"===e.code&&y()}))}();
//# sourceMappingURL=index.4e16c8d6.js.map
