{"mappings":"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","sources":["src/js/script.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3';\n  const API_KEY = 'api_key=b5e824a3d922f68ba211fcf6dbdcb6f5';\n  const API_URL = BASE_URL + '/discover/movie?sort_by-popularity.desc&' + API_KEY;\n  const IMG_URL = 'https://image.tmdb.org/t/p/w500';\n  const searchURL = BASE_URL + '/search/movie?' + API_KEY;\n  const getGenres = BASE_URL + '/genre/movie/list?' + API_KEY;\n  //localStorage\n  let currentMovieTitle, currentMovieID, queue, watched;\n  JSON.parse(localStorage.getItem(\"movie-queue\")) === null ? queue = [] : queue = JSON.parse(localStorage.getItem(\"movie-queue\"));\n  localStorage.setItem(\"movie-queue\", JSON.stringify(queue));\n  JSON.parse(localStorage.getItem(\"movie-watched\")) === null ? watched = [] : watched = JSON.parse(localStorage.getItem(\"movie-watched\"));\n  localStorage.setItem(\"movie-watched\", JSON.stringify(watched));\n  // MODAL SECTION\n  const modal = document.getElementById('myModal');\n  const modalPoster = document.getElementById('modal-poster');\n  const modalTitle = document.getElementById('modal-title');\n  const modalVote = document.getElementById('modal-vote');\n  const modalPopularity = document.getElementById('modal-popularity');\n  const modalOrigTitle = document.getElementById('modal-original-title');\n  const modalGenre = document.getElementById('modal-genre');\n  const modalOverview = document.getElementById('modal-overview');\n  const addToWatchedBtn = document.getElementById('addToWatchedBtn');\n  const addToQueuBtn = document.getElementById('addToQueuBtn');\nconst closeBtn = document.getElementsByClassName('close')[0];\nlet genres;\nfetch(getGenres)\n    .then(response => response.json())\n    .then(data => {\n        genres = data.genres;\n      getMovies(API_URL, genres); // Call getMovies with genres\n      showMovies(data, genres)\n    })\n    .catch(error => {\n        // console.error('Error fetching genres:', error);\n    });\n  // function to open the modal with movie details\n  function openModal(movie) {\n    modalPoster.src = `https://image.tmdb.org/t/p/w500/${movie.poster_path}`;\n    modalTitle.textContent = movie.title.toUpperCase();\n    modalVote.innerHTML = `\n      <span class=\"vote-avg\">${movie.vote_average.toFixed(1)}</span>` + '   /   ' + movie.vote_count;\n    modalPopularity.textContent = movie.popularity.toFixed(1);\n    modalOrigTitle.textContent = movie.original_title.toUpperCase();\n    // modalGenre.textContent = movie.genre;\n    const movieGenres = movie.genre_ids.map(genreId => {\n        const genre = genres.find(genre => genre.id === genreId);\n        return genre ? genre.name : '';\n    }).join(', ');\n    modalGenre.textContent = movieGenres;\n    modalOverview.textContent = movie.overview;\n    modal.style.display = 'block';\n  }\n  // function to close the modal\n  function closeModal() {\n    modal.style.display = 'none';\n  }\n  // event listener for the close button\n  closeBtn.addEventListener('click', closeModal);\n  // event listener for clicks outside the modal\n  window.addEventListener('click', function (event) {\n    if (event.target === modal) {\n      closeModal();\n    }\n  });\n  const main = document.getElementById('main');\n  const form = document.getElementById('search-form');\n  const search = document.getElementById('search-input');\n  const loader = document.querySelector('.loader-container');\n  // PAGINATION\n  let lastUrl;\n  getMovies(API_URL);\n  // DISPLAY MOVIE CARDS\n  function getMovies(url) {\n    lastUrl = url;\n    main.classList.toggle('is-hidden');\n    loader.classList.toggle('is-hidden');\n    \n    fetch(url)\n      .then(res => res.json())\n      .then(data => {\n        console.log(data.results);\n        if (data.results.length !== 0) {\n          showMovies(data.results);\n          currentPage = data.page;\n          nextPage = currentPage + 1;\n          prevPage = currentPage - 1;\n          totalPages = data.total_pages;\n          main.classList.toggle('is-hidden');\n          loader.classList.toggle('is-hidden');\n      document.addEventListener('DOMContentLoaded', function () {\n            const current = document.getElementById('current');\n            current.innerText = currentPage;\n          })\n            if (currentPage <= 1) {\n            if (prev)  prev.classList.add('disabled');\n            if (next) next.classList.remove('disabled');\n            } else if (currentPage >= totalPages) {\n            if (prev)  prev.classList.remove('disabled');\n            if (next)  next.classList.add('disabled');\n            } else {\n             if (prev)  prev.classList.remove('disabled');\n             if (next)  next.classList.remove('disabled');\n          }\n          } else {\n            main.classList.toggle('is-hidden');\n            loader.classList.toggle('is-hidden');\n            main.innerHTML = `<h1 class=\"no-results\">No Results Found</h1>`;\n          }\n       }\n    )};\n// Add event listeners for prev and next inside this block\n    prev = document.getElementById('prev');\n    next = document.getElementById('next');\n// function for previous page\nif (prev) {\nprev.addEventListener('click', () => {\nif (prevPage > 0) {\n  pageCall(prevPage);\n}\n});\n}\n    // function for the next page\nif (next) {\nnext.addEventListener('click', () => {\nif (nextPage <= totalPages) {\n  pageCall(nextPage);\n}\n});\n}\nfunction showMovies(data) {\n    main.innerHTML = '';\n    data.forEach(movie => {\n      const { title, poster_path, release_date, genre_ids } = movie;\n      const movieEl = document.createElement('div');\n      movieEl.classList.add('movie');\n      const movieGenres = genre_ids && Array.isArray(genres)\n            ? genre_ids.map(genreId => {\n                const genre = genres.find(genre => genre.id === genreId);\n                return genre ? genre.name : '';\n            }).join(', ')\n        : '';\n      movieEl.innerHTML = `\n            <img src=\"${poster_path\n          ? IMG_URL + poster_path\n          : 'http:/>/via.placeholder.com/1080x1500'\n        }\"\n                alt=\"${title}\"/>\n            <div class=\"movie-info\">\n                <h3>${title.toUpperCase()}</h3>\n                <div class=\"movie-details\">\n                <div>${movieGenres} | ${release_date.slice(0,4)}</div>\n                </div>\n                  </div>\n                  `;\n                  movieEl.addEventListener('click', function () {\n                    openModal(movie);\n                  });\n      main.appendChild(movieEl);\n    });\n  }\n  form.addEventListener('submit', e => {\n    e.preventDefault();\n    const searchTerm = search.value;\n    if (searchTerm) {\n      getMovies(searchURL + '&query=' + searchTerm);\n    } else {\n      getMovies(API_URL);\n    }\n  });\n  // function for previous page\n  prev.addEventListener('click', () => {\n    if (prevPage > 0) {\n      pageCall(prevPage);\n    }\n  });\n  // function for the next page\n  next.addEventListener('click', () => {\n    if (nextPage <= totalPages) {\n      pageCall(nextPage);\n    }\n  });\n  export function pageCall(page) {\n    let urlSplit = lastUrl.split('?');\n    let queryParams = urlSplit[1].split('&');\n    let key = queryParams[queryParams.length - 1].split('=');\n    if (key[0] != 'page') {\n      let url = lastUrl + '&page=' + page;\n      getMovies(url);\n    } else {\n      key[1] = page.toString();\n      let a = key.join('=');\n      queryParams[queryParams.length - 1] = a;\n      let b = queryParams.join('&');\n      let url = urlSplit[0] + '?' + b;\n      getMovies(url);\n    }\n  }\n  //Clicking a movie\n  main.addEventListener('click', e => {\n    let currentMovie = e.target.parentElement;\n    currentMovieTitle = currentMovie.lastElementChild.firstElementChild.innerText;\n    console.log(currentMovieTitle);\n  });\n  //Add to Watched (localStorage)\n  addToWatchedBtn.addEventListener('click', () => {\n    watched.includes(currentMovieTitle)\n      ? alert(`${currentMovieTitle} has been watched already`)\n      : watched.push(currentMovieTitle);\n    localStorage.setItem('movie-watched', JSON.stringify(watched));\n  });\n  //Add to Queue (localStorage)\n  addToQueuBtn.addEventListener('click', () => {\n    queue.includes(currentMovieTitle)\n      ? alert(`${currentMovieTitle} has been added to the queue already`)\n      : queue.push(currentMovieTitle);\n    localStorage.setItem('movie-queue', JSON.stringify(queue));\n  });\n  //Add to Watched (localStorage)\n  addToWatchedBtn.addEventListener('click', () => {\n    watched.includes(currentMovieID) ?\n      alert(`${currentMovieTitle} has been watched already`) :\n      watched.push(currentMovieID);\n    localStorage.setItem('movie-watched', JSON.stringify(watched));\n  })\n  //Add to Queue (localStorage)\n  addToQueuBtn.addEventListener('click', () => {\n    queue.includes(currentMovieID) ?\n      alert(`${currentMovieTitle} has been added to the queue already`) :\n      queue.push(currentMovieID);\n    localStorage.setItem('movie-queue', JSON.stringify(queue));\n  })\n  //Pressing escape to close modal\n  document.body.addEventListener('keydown', event => {\n    if (event.code === 'Escape') {\n      closeModal();\n    }\n  });"],"names":["$66b821ea461d9f2a$var$currentMovieTitle","$66b821ea461d9f2a$var$currentMovieID","$66b821ea461d9f2a$var$queue","$66b821ea461d9f2a$var$watched","$66b821ea461d9f2a$var$API_KEY","$66b821ea461d9f2a$var$API_URL","$66b821ea461d9f2a$var$BASE_URL","JSON","parse","localStorage","getItem","setItem","stringify","$66b821ea461d9f2a$var$genres","$66b821ea461d9f2a$var$modal","document","getElementById","$66b821ea461d9f2a$var$modalPoster","$66b821ea461d9f2a$var$modalTitle","$66b821ea461d9f2a$var$modalVote","$66b821ea461d9f2a$var$modalPopularity","$66b821ea461d9f2a$var$modalOrigTitle","$66b821ea461d9f2a$var$modalGenre","$66b821ea461d9f2a$var$modalOverview","$66b821ea461d9f2a$var$addToWatchedBtn","$66b821ea461d9f2a$var$addToQueuBtn","$66b821ea461d9f2a$var$closeBtn","getElementsByClassName","$66b821ea461d9f2a$var$closeModal","style","display","fetch","then","response","json","data","genres","$66b821ea461d9f2a$var$getMovies","$66b821ea461d9f2a$var$showMovies","catch","error","addEventListener","window","event","target","$66b821ea461d9f2a$var$lastUrl","$66b821ea461d9f2a$var$main","$66b821ea461d9f2a$var$form","$66b821ea461d9f2a$var$search","$66b821ea461d9f2a$var$loader","querySelector","url","classList","toggle","res","console","log","results","length","currentPage","page","nextPage","prevPage","totalPages","total_pages","innerText","prev","add","next","remove","innerHTML","forEach","movie","title","poster_path","release_date","genre_ids","movieEl","createElement","movieGenres","Array","isArray","map","genreId","genre2","find","genre","id","name","join","concat","toUpperCase","slice","src","textContent","vote_average","toFixed","vote_count","popularity","original_title","genre1","overview","$66b821ea461d9f2a$var$openModal","appendChild","$66b821ea461d9f2a$export$26f0a13c57387c91","urlSplit","split","queryParams","key","toString","a","b","e","preventDefault","searchTerm","value","$66b821ea461d9f2a$var$searchURL","currentMovie","parentElement","lastElementChild","firstElementChild","includes","alert","push","body","code"],"version":3,"file":"index.aa8f8ef1.js.map"}