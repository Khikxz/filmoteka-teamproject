{"mappings":"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","sources":["src/js/script.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'api_key=b5e824a3d922f68ba211fcf6dbdcb6f5';\nconst API_URL = BASE_URL + '/discover/movie?sort_by-popularity.desc&' + API_KEY;\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\nconst searchURL = BASE_URL + '/search/movie?'+API_KEY;\n\n//localStorage\nlet currentMovieTitle, currentMovieID, queue, watched;\nJSON.parse(localStorage.getItem(\"movie-queue\")) === null? queue = [] : queue = JSON.parse(localStorage.getItem(\"movie-queue\"));\nlocalStorage.setItem(\"movie-queue\", JSON.stringify(queue));\n\nJSON.parse(localStorage.getItem(\"movie-watched\")) === null? watched = [] : watched = JSON.parse(localStorage.getItem(\"movie-watched\")) ;\nlocalStorage.setItem(\"movie-watched\", JSON.stringify(watched));\n\n// MODAL SECTION\nconst modal = document.getElementById('myModal');\nconst modalPoster = document.getElementById('modal-poster');\nconst modalTitle = document.getElementById('modal-title');\nconst modalVote = document.getElementById('modal-vote');\nconst modalPopularity = document.getElementById('modal-popularity');\nconst modalOrigTitle = document.getElementById('modal-original-title');\nconst modalGenre = document.getElementById('modal-genre');\nconst modalOverview = document.getElementById('modal-overview');\nconst addToWatchedBtn = document.getElementById('addToWatchedBtn');\nconst addToQueuBtn = document.getElementById('addToQueuBtn');\nconst closeBtn = document.getElementsByClassName('close')[0];\n\n// function to open the modal with movie details\nfunction openModal(movie) {\n    modalPoster.src = `https://image.tmdb.org/t/p/w500/${movie.poster_path}`;\n    modalTitle.textContent = movie.title;\n    modalVote.textContent = movie.vote_average+'/'+movie.vote_count;\n    modalPopularity.textContent = movie.popularity;\n    modalOrigTitle.textContent = movie.original_title;\n    modalGenre.textContent = movie.genre_ids;\n    modalOverview.textContent = movie.overview;\n    modal.style.display = \"block\";\n    currentMovieID = movie.id;\n    currentMovieTitle = movie.original_title;\n}\n\n// function to close the modal\nfunction closeModal() {\n    modal.style.display = \"none\";\n}\n\n// event listener for the close button\ncloseBtn.addEventListener('click', closeModal);\n\n// event listener for clicks outside the modal\nwindow.addEventListener('click', function(event) {\n    if(event.target === modal) {\n        closeModal();\n    }\n});\n\nconst main = document.getElementById('main');\nconst form = document.getElementById('search-form');\nconst search = document.getElementById('search-input');\nconst galleryEl = document.getElementById('gallery');\nconst loader = document.querySelector('.loader-container');\n\n// PAGINATION\nconst prev = document.getElementById('prev');\nconst next = document.getElementById('next');\nconst current = document.getElementById('current');\n\nvar currentPage = 1;\nvar nextPage = 2;\nvar prevPage = 3;\nvar lastUrl = '';\nvar totalPages = 100;\n\ngetMovies(API_URL);\n\n// DISPLAY MOVIE CARDS\nfunction getMovies(url) {\n    lastUrl = url;\n    main.classList.toggle('is-hidden');\n    loader.classList.toggle('is-hidden'); \n\n    fetch(url)\n        .then(res => res.json())\n        .then(data => {\n            console.log(data.results)\n            if(data.results.length !== 0){\n                showMovies(data.results);\n                currentPage = data.page;\n                nextPage = currentPage + 1;\n                prevPage = currentPage - 1;\n                totalPages = data.total_pages;\n                main.classList.toggle('is-hidden');\n                loader.classList.toggle('is-hidden');  \n\n                current.innerText = currentPage;\n                if(currentPage <= 1){\n                    prev.classList.add('disabled');\n                    next.classList.remove('disabled');\n                } else if(currentPage >= totalPages){\n                    prev.classList.remove('disabled');\n                    next.classList.add('disabled');\n                } else {\n                    prev.classList.remove('disabled');\n                    next.classList.remove('disabled');\n                }\n\n            } else {\n                main.classList.toggle('is-hidden');\n                loader.classList.toggle('is-hidden');  \n                main.innerHTML = `<h1 class=\"no-results\">No Results Found</h1>`\n            }\n\n    })\n}\n\nfunction showMovies(data) {\n    main.innerHTML = '';\n\n    data.forEach(movie => {\n        const { title, poster_path, release_date } = movie;\n        const movieEl = document.createElement('div');\n        movieEl.classList.add('movie');\n        movieEl.innerHTML = `\n            <img src=\"${poster_path? IMG_URL+poster_path: \"http:/>/via.placeholder.com/1080x1500\"}\"\n                alt=\"${title}\"/>\n            \n            <div class=\"movie-info\">\n                <h3>${title}</h3>\n                <div class=\"movie-details\">\n                    <span id=\"release_date\" class=\"${release_date}\">${release_date}</span>\n                </div>\n            </div>        \n        `\n        movieEl.addEventListener('click', function(){openModal(movie)});\n        main.appendChild(movieEl);\n    })\n}\n\nform.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    const searchTerm = search.value;\n    \n    if(searchTerm) {\n        getMovies(searchURL+'&query='+searchTerm)\n    }else{\n        getMovies(API_URL);\n    }\n})\n\n\n// function for previous page\nprev.addEventListener('click', () => {\n    if(prevPage > 0) {\n        pageCall(prevPage);\n    }\n})\n\n// function for the next page\nnext.addEventListener('click', () => {\n    if(nextPage <= totalPages) {\n        pageCall(nextPage);\n    }\n})\n\nfunction pageCall(page) {\n    let urlSplit = lastUrl.split('?');\n    let queryParams = urlSplit[1].split('&');\n    let key = queryParams[queryParams.length - 1].split('=');\n    if(key[0] != 'page') {\n        let url = lastUrl + '&page=' + page;\n        getMovies(url);\n    }else{\n        key[1] = page.toString();\n        let a = key.join('=');\n        queryParams[queryParams.length - 1] = a;\n        let b = queryParams.join('&');\n        let url = urlSplit[0] +'?'+ b;\n        getMovies(url);\n    }\n}\n\n//Add to Watched (localStorage)\naddToWatchedBtn.addEventListener('click', () => {\n    watched.includes(currentMovieID) ? \n        alert(`${currentMovieTitle} has been watched already`) :\n        watched.push(currentMovieID);\n        localStorage.setItem('movie-watched', JSON.stringify(watched));\n})\n\n//Add to Queue (localStorage)\naddToQueuBtn.addEventListener('click', () => {\n    queue.includes(currentMovieID) ? \n        alert(`${currentMovieTitle} has been added to the queue already`) :\n        queue.push(currentMovieID);\n        localStorage.setItem('movie-queue', JSON.stringify(queue));\n})\n\n\n//Pressing escape to close modal\ndocument.body.addEventListener(\"keydown\", event => {\n    if(event.code === \"Escape\"){\n        closeModal();\n    }\n})"],"names":["$66b821ea461d9f2a$var$currentMovieTitle","$66b821ea461d9f2a$var$currentMovieID","$66b821ea461d9f2a$var$queue","$66b821ea461d9f2a$var$watched","$66b821ea461d9f2a$var$API_KEY","$66b821ea461d9f2a$var$API_URL","$66b821ea461d9f2a$var$BASE_URL","$66b821ea461d9f2a$var$IMG_URL","JSON","parse","localStorage","getItem","setItem","stringify","$66b821ea461d9f2a$var$modal","document","getElementById","$66b821ea461d9f2a$var$modalPoster","$66b821ea461d9f2a$var$modalTitle","$66b821ea461d9f2a$var$modalVote","$66b821ea461d9f2a$var$modalPopularity","$66b821ea461d9f2a$var$modalOrigTitle","$66b821ea461d9f2a$var$modalGenre","$66b821ea461d9f2a$var$modalOverview","$66b821ea461d9f2a$var$addToWatchedBtn","$66b821ea461d9f2a$var$addToQueuBtn","$66b821ea461d9f2a$var$closeModal","style","display","getElementsByClassName","addEventListener","window","event","target","$66b821ea461d9f2a$var$main","$66b821ea461d9f2a$var$form","$66b821ea461d9f2a$var$search","$66b821ea461d9f2a$var$loader","querySelector","$66b821ea461d9f2a$var$prev","$66b821ea461d9f2a$var$next","$66b821ea461d9f2a$var$current","$66b821ea461d9f2a$var$currentPage","$66b821ea461d9f2a$var$nextPage","$66b821ea461d9f2a$var$prevPage","$66b821ea461d9f2a$var$lastUrl","$66b821ea461d9f2a$var$totalPages","$66b821ea461d9f2a$var$getMovies","url","classList","toggle","fetch","then","res","json","data","console","log","results","length","innerHTML","forEach","movie","title","poster_path","release_date","movieEl","createElement","add","concat","src","textContent","vote_average","vote_count","popularity","original_title","genre_ids","overview","id","$66b821ea461d9f2a$var$openModal","appendChild","$66b821ea461d9f2a$var$showMovies","page","total_pages","innerText","remove","$66b821ea461d9f2a$var$pageCall","urlSplit","split","queryParams","key","toString","a","join","b","e","preventDefault","searchTerm","value","$66b821ea461d9f2a$var$searchURL","includes","alert","push","body","code"],"version":3,"file":"index.aaa8c54b.js.map"}