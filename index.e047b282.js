const e="https://api.themoviedb.org/3/discover/movie?sort_by-popularity.desc&api_key=b5e824a3d922f68ba211fcf6dbdcb6f5";let t,n,a,l;a=null===JSON.parse(localStorage.getItem("movie-queue"))?[]:JSON.parse(localStorage.getItem("movie-queue")),localStorage.setItem("movie-queue",JSON.stringify(a)),l=null===JSON.parse(localStorage.getItem("movie-watched"))?[]:JSON.parse(localStorage.getItem("movie-watched")),localStorage.setItem("movie-watched",JSON.stringify(l));const s=document.getElementById("myModal"),o=document.getElementById("modal-poster"),i=document.getElementById("modal-title"),d=document.getElementById("modal-vote"),r=document.getElementById("modal-popularity"),c=document.getElementById("modal-original-title"),g=document.getElementById("modal-genre"),m=document.getElementById("modal-overview"),u=document.getElementById("addToWatchedBtn"),p=document.getElementById("addToQueuBtn");function v(){s.style.display="none"}document.getElementsByClassName("close")[0].addEventListener("click",v),window.addEventListener("click",(function(e){e.target===s&&v()}));const h=document.getElementById("main"),y=document.getElementById("search-form"),E=document.getElementById("search-input"),b=(document.getElementById("gallery"),document.querySelector(".loader-container"));function f(e){lastUrl=e,h.classList.toggle("is-hidden"),b.classList.toggle("is-hidden"),fetch(e).then((e=>e.json())).then((e=>{console.log(e.results),0!==e.results.length?(!function(e){h.innerHTML="",e.forEach((e=>{const{title:a,poster_path:l,release_date:u,genre_ids:p}=e,v=document.createElement("div");v.classList.add("movie"),v.innerHTML=`\n            <img src="${l?"https://image.tmdb.org/t/p/w500"+l:"http:/>/via.placeholder.com/1080x1500"}"\n                alt="${a}"/>\n            \n            <div class="movie-info">\n                <h3>${a.toUpperCase()}</h3>\n                <div class="movie-details">\n                    <span id="genre" class="${p}">${p}</span> |\n                    <span id="release_date" class="${u}">${u.slice(0,4)}</span>\n                </div>\n            </div>        \n        `,v.addEventListener("click",(function(){!function(e){o.src=`https://image.tmdb.org/t/p/w500/${e.poster_path}`,i.textContent=e.title.toUpperCase(),d.textContent=e.vote_average.toFixed(1)+"   /   "+e.vote_count,r.textContent=e.popularity.toFixed(1),c.textContent=e.original_title.toUpperCase(),g.textContent=e.genre,m.textContent=e.overview,s.style.display="block",o.src=`https://image.tmdb.org/t/p/w500/${e.poster_path}`,i.textContent=e.title,d.textContent=e.vote_average+"/"+e.vote_count,r.textContent=e.popularity,c.textContent=e.original_title,g.textContent=e.genre_ids,m.textContent=e.overview,s.style.display="block",n=e.id,t=e.original_title}(e)})),h.appendChild(v)}))}(e.results),currentPage=e.page,nextPage=currentPage+1,prevPage=currentPage-1,totalPages=e.total_pages,h.classList.toggle("is-hidden"),b.classList.toggle("is-hidden"),current.innerText=currentPage,currentPage<=1?(prev.classList.add("disabled"),next.classList.remove("disabled")):currentPage>=totalPages?(prev.classList.remove("disabled"),next.classList.add("disabled")):(prev.classList.remove("disabled"),next.classList.remove("disabled"))):(h.classList.toggle("is-hidden"),b.classList.toggle("is-hidden"),h.innerHTML='<h1 class="no-results">No Results Found</h1>')}))}function L(e){let t=lastUrl.split("?"),n=t[1].split("&"),a=n[n.length-1].split("=");if("page"!=a[0]){f(lastUrl+"&page="+e)}else{a[1]=e.toString();let l=a.join("=");n[n.length-1]=l;let s=n.join("&");f(t[0]+"?"+s)}}f(e),y.addEventListener("submit",(t=>{t.preventDefault();const n=E.value;f(n?"https://api.themoviedb.org/3/search/movie?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5&query="+n:e)})),prev.addEventListener("click",(()=>{prevPage>0&&L(prevPage)})),next.addEventListener("click",(()=>{nextPage<=totalPages&&L(nextPage)})),h.addEventListener("click",(e=>{let n=e.target.parentElement;t=n.lastElementChild.firstElementChild.innerText,console.log(t)})),u.addEventListener("click",(()=>{l.includes(t)?alert(`${t} has been watched already`):l.push(t),localStorage.setItem("movie-watched",JSON.stringify(l))})),p.addEventListener("click",(()=>{a.includes(t)?alert(`${t} has been added to the queue already`):a.push(t),localStorage.setItem("movie-queue",JSON.stringify(a))})),u.addEventListener("click",(()=>{l.includes(n)?alert(`${t} has been watched already`):l.push(n),localStorage.setItem("movie-watched",JSON.stringify(l))})),p.addEventListener("click",(()=>{a.includes(n)?alert(`${t} has been added to the queue already`):a.push(n),localStorage.setItem("movie-queue",JSON.stringify(a))})),document.body.addEventListener("keydown",(e=>{"Escape"===e.code&&v()}));
//# sourceMappingURL=index.e047b282.js.map
